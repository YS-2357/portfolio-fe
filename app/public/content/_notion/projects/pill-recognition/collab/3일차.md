---
íƒœê·¸: []
ì´ë¦„: "3ì¼ì°¨"
---

# 3ì¼ì°¨


## ğŸ—“ï¸ ì¼ì: 250318(í™”)


## âœ ì‘ì„±ì: ì •ì˜ì„ 


---


## âœ… ì˜¤ëŠ˜ í•  ì¼


- [x] ì›ë³¸ ë°ì´í„° ì¶”ê°€ ì–´ë…¸í…Œì´ì…˜ ë§ˆë¬´ë¦¬

- [ ] Task 2

- [ ] Task 3

---


## ğŸ¯ ì˜¤ëŠ˜ í•œ ì¼


**ëˆ„ë½ëœ ì–´ë…¸í…Œì´ì…˜ì„ ë³´ì™„í•˜ê³ , ë°ì´í„° ë¡œë”ë¥¼ ëª¨ë“ˆí™”í•˜ë©° ì „ì²´ í•™ìŠµ íŒŒì´í”„ë¼ì¸ êµ¬ì¡°ë¥¼ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤.**


1. ì›ë³¸ JSON ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ëˆ„ë½ëœ ì–´ë…¸í…Œì´ì…˜ ì •ë³´ ë³´ì™„ ë° ID/ì¹´í…Œê³ ë¦¬ ì •ë¦¬

1. 1135ê°œì˜ JSON íŒŒì¼ì„ ì¼ê´„ ì—…ë°ì´íŠ¸í•˜ì—¬ ì–´ë…¸í…Œì´ì…˜ ì™„ì„±ë„ í™•ë³´

1. `data_loader.py` ëª¨ë“ˆí™”ë¥¼ í†µí•´ í•™ìŠµ/ê²€ì¦/ì‹œí—˜ìš© ë°ì´í„°ì…‹ êµ¬ì„± ì²´ê³„í™”

1. í•™ìŠµ ëª¨ë“ˆ êµ¬ì¡° ì„¤ê³„ (ë³€ìˆ˜ íŒŒì‹±, ì˜µí‹°ë§ˆì´ì €/ìŠ¤ì¼€ì¤„ëŸ¬ ëª¨ë“ˆí™”, ê²€ì¦ ë‚´ì¥ ë£¨í”„ ë“±)

---


## ğŸ› ï¸ Issues & Challenges


- ì¼ë¶€ ì´ë¯¸ì§€ì—ì„œ **ì¹´í…Œê³ ë¦¬ ID ëˆ„ë½ ë¬¸ì œ** ë°œìƒ â†’ ì´ë¯¸ì§€ ì •ë³´ ê¸°ë°˜ìœ¼ë¡œ ì¬í• ë‹¹ ë°©ì‹ ë„ì…

- ì–´ë…¸í…Œì´ì…˜ì´ ì†ìƒë˜ê±°ë‚˜ ë°”ìš´ë”© ë°•ìŠ¤ ì¢Œí‘œê°€ ì˜ëª»ëœ JSON íŒŒì¼ í•„í„°ë§ ë° ìˆ˜ì •

---


## ğŸ’¡ Notes & Ideas


- `tv_tensor` ê¸°ë°˜ íŠ¸ëœìŠ¤í¼ì„ í¬í•¨í•œ ë°ì´í„° ë¡œë” í•˜ë‚˜ë¡œ í†µí•© ì„¤ê³„

- ëª¨ë¸ í•™ìŠµ ë£¨í”„ì— ê²€ì¦ ë° ì„±ëŠ¥ í–¥ìƒ ì‹œ ìë™ ì €ì¥ ê¸°ëŠ¥ í¬í•¨

---


## ğŸ”„ ë‚´ì¼ í•  ì¼


- [ ] ë°ì´í„° ë¡œë” ëª¨ë“ˆí™” ì ê²€ ë° í…ŒìŠ¤íŠ¸

- [ ] íŒ€ì›ë“¤ê³¼ í•™ìŠµ/ì‹œê°í™” ëª¨ë“ˆ ì—­í•  ë¶„ë‹´ ë° ì¡°ì •

- [ ] Task 3

---


## ğŸ“ Reflection


- ì–´ë…¸í…Œì´ì…˜ ë³´ì™„ì˜ ë°˜ë³µ ì‘ì—…ì´ ë§ê³  í”¼ë¡œë„ê°€ ë†’ì•˜ì§€ë§Œ, ì™„ì„±ë„ì— í° ë„ì›€ì´ ë¨

- íŒ€ì› ì¡°ìœ¨ì´ ì‰½ì§€ ì•Šì§€ë§Œ ê° ëª¨ë“ˆì„ ëª…í™•íˆ êµ¬ë¶„í•˜ë©´ì„œ í˜‘ì—… ê¸°ë°˜ì„ ë§ˆë ¨ ì¤‘

---


---


## ğŸ–¥ï¸ ì½”ë“œ ìŠ¤ë‹ˆí«


```python
# ì˜¤ëŠ˜ ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œ ì¤‘ ì„íŒ©íŠ¸ ìˆì—ˆë˜ ë¶€ë¶„
import os
import json

#  train_data_dict ê¸°ë°˜ìœ¼ë¡œ íŒŒì¼ëª… ë° ì•Œì•½ëª… ê¸°ì¤€ ID ë§¤í•‘
file_to_image_id = {}  # íŒŒì¼ëª… â†’ ì´ë¯¸ì§€ ID ë§¤í•‘

for file_name, entries in train_data_dict.items():
    for entry in entries:
        image_id = entry["image_id"]
        category_id = entry["category_id"]
        dl_name = entry["dl_name"]

        #  íŒŒì¼ëª…ì„ ê¸°ì¤€ìœ¼ë¡œ image_id ì €ì¥
        file_to_image_id[file_name] = image_id

#  missing_annotations í´ë” ì„¤ì •
missing_annotations_dir = "/content/ai01_data/missing_annotations/"
modified_count = 0
annotation_id_counter = 1  # ì–´ë…¸í…Œì´ì…˜ IDë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ë¶€ì—¬í•˜ê¸° ìœ„í•œ ë³€ìˆ˜

#  missing_annotations ë‚´ JSON íŒŒì¼ ì—…ë°ì´íŠ¸
for root, _, files in os.walk(missing_annotations_dir):
    for file in files:
        if file.endswith(".json"):
            json_path = os.path.join(root, file)

            #  JSON íŒŒì¼ ë¡œë“œ
            try:
                with open(json_path, "r", encoding="utf-8") as f:
                    missing_data = json.load(f)
            except json.JSONDecodeError:
                continue  # ì†ìƒëœ JSON íŒŒì¼ ìŠ¤í‚µ

            #  ì´ë¯¸ì§€ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
            if "images" in missing_data and len(missing_data["images"]) > 0:
                missing_image_info = missing_data["images"][0]
                missing_file_name = missing_image_info["file_name"]
                missing_dl_name = missing_image_info.get("dl_name", "Unknown")

                #  íŒŒì¼ëª…ì´ train_data_dictì— ìˆëŠ” ê²½ìš° â†’ image_id ë³€ê²½
                if missing_file_name in file_to_image_id:
                    new_image_id = file_to_image_id[missing_file_name]
                    missing_data["images"][0]["id"] = new_image_id  #  ì´ë¯¸ì§€ ID ë³€ê²½

                    #  ì–´ë…¸í…Œì´ì…˜ì˜ image_idë„ ë³€ê²½
                    for ann in missing_data.get("annotations", []):
                        ann["image_id"] = new_image_id  #  ì–´ë…¸í…Œì´ì…˜ì´ ì†í•œ ì´ë¯¸ì§€ ID ìˆ˜ì •
                        ann["id"] = annotation_id_counter  #  ìƒˆë¡œìš´ ì–´ë…¸í…Œì´ì…˜ ID ë¶€ì—¬
                        ann["category_id"] = int(missing_image_info["dl_idx"])  # ì¹´í…Œê³ ë¦¬ ID ë³€ê²½
                        annotation_id_counter += 1

                    new_category_id = int(missing_image_info["dl_idx"])
                    new_category_name = missing_image_info["dl_name"]

                    #  ì–´ë…¸í…Œì´ì…˜ì˜ category_id ë³€ê²½
                    for ann in missing_data.get("annotations", []):
                        ann["category_id"] = new_category_id  #  ì¹´í…Œê³ ë¦¬ ID ì—…ë°ì´íŠ¸

                    #  categories ì •ë³´ ì—…ë°ì´íŠ¸
                    missing_data["categories"] = [
                        {"id": new_category_id, "name": new_category_name, "supercategory": "pill"}
                    ]

                #  JSON íŒŒì¼ ë‹¤ì‹œ ì €ì¥
                with open(json_path, "w", encoding="utf-8") as f:
                    json.dump(missing_data, f, indent=4, ensure_ascii=False)

                modified_count += 1

#  ìµœì¢… ê²°ê³¼ ì¶œë ¥
print(f"ì´ {modified_count}ê°œì˜ JSON íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.")
# ì¶œë ¥: ì´ 1135ê°œì˜ JSON íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.
```


---



---


1. ë°ì´í„° ë¡œë”

1. ëª¨ë¸ - ë³€ìˆ˜ëŠ” íŒŒì‹±í•˜ê³  ì˜µí‹°ë§ˆì´ì € ìŠ¤ì¼€ì¥´ëŸ¬ëŠ” ëª¨ë“ˆí™” / ë¡œìŠ¤ í•¨ìˆ˜

1. 


