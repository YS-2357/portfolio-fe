---
태그: []
이름: "4일차-250515(목)"
---

# 4일차-250515(목)


## 🗓️ 일자: 250515(목)


## ✍ 작성자: 정영선


---


## ✅ 오늘 할 일


- [x] 방어적 코드 형식 통일, 규칙 설정하기

- [x] 벡터 DB 타입에 따라 저장/로드 분기 처리 (`faiss`, `chroma`)

- [x] 자동 인덱스 네이밍 함수 (`generate_index_name`) 개선 및 적용

- [x] 기존 벡터 DB가 존재하면 로딩하고, 없으면 생성하는 로직 개선

---


## 🎯 오늘 한 일


1. **코드 정리 및 방어적 처리:**

1. **인덱스 네이밍 로직 개선:**

1. **벡터 DB 동적 로딩 구현:**

---


## 🛠️ Issues & Challenges


- **Chroma 저장 구조 불일치 문제:**

- `**generate_vector_db**`**의 리턴값 불일치:**

- **중복 작업 발생:**

- **DB 타입에 따른 파일 경로 차이로 인한 분기 처리 복잡도 증가:**

---


## 💡 Notes & Ideas


- `vector_store` 로드 여부에 따라 전처리/청킹 건너뛰기 → 메타데이터 저장 및 비교 필요

- 향후 `retrieval` & `generation` task를 각각 분리하여 수행 흐름 모듈화 필요함

---


## 🔄 내일 할 일


- [ ] 벡터 DB 메타데이터 저장 및 동일 설정 여부 확인 로직 구현

- [ ] 기존 DB와 config 비교하여 전처리·청킹 건너뛰기 기능 구현

- [ ] 불러오기 기준 단일화 및 로깅 방식 최종 결정

- [ ] 서울특별시_2024년 지도정보 플랫폼 및 전문활용 연계 시스템 고도화 용.pdf:  56%|██████████▋        | 42/75 [00:01<00:02, 15.47it/s]MuPDF error: syntax error: invalid key in dict
MuPDF error: syntax error: invalid key in dict

---


## 📝 Reflection


- 팀원들에게는 계속 새로운 기능을 만들도록 요구하고, 나는 기존 파일들을 수정/기능추가 등의 작업만을 하고 있다. 팀원들의 불만이 쌓일까봐 걱정되고, 나도 모델을 비교하고 싶은 생각이 든다.

- 실험을 위해 로깅을 해야한다. 그런데 로깅결과 명백하게 정답인 방향이 있다면 나머지 기능을 삭제하여 업로드하는 것이 맞을까?

---


## 🖥️ 코드 스니펫


```python
def generate_index_name(config: dict) -> str:
    """
    config 설정값을 조합하여 벡터 DB 인덱스 이름을 생성합니다.

    구성 요소:
    - data.type
    - data.limit
    - chunk.splitter
    - embedding.model
    - embedding.db_type
####
db_type = embed_config.get("db_type", "faiss")
if db_type == "faiss":
	return
elif db_type == "chroma":
	return
else:
	raise ValueError
```

