---
태그: []
날짜: "2025-12-01"
이름: "25.12.01 (월)"
---

# 25.12.01 (월)


# 📅 날짜: 25.12.01 (월)


## 🧩 주요 업무


- 보장분석 기준 수식 구조를 기존 `base × weight × scale` 방식에서 시장 현실 기반의 `"표준값 × 보정계수 + 캡"` 구조로 재설계하고, 정액담보·후유장해·사망·실손에 대한 산출 프레임을 정리함

- 실손/암/뇌/심장/수술/후유장해/사망 전 영역에 대해 필수 보장항목·치료비 공백 영역(입원·통원·배상)을 재점검하여 표준 담보 구성 방향을 보완함

- 200+ 페르소나 조합을 대상으로 하는 표준 보장 기준 CSV 자동 생성 스크립트를 검토·개편하고, 실손 단계형 조정 로직·연소득 배수 기반 후유장해·사망 산출 구조를 구현함

- 전체 설계·수식에 대해 약관 한도, 예산 제약, 의료비 인플레이션, 중복·과보장 방지, 재정 여력, 건강·가족력·직업위험 반영 등 추가적으로 고려해야 할 개선 포인트를 정리함

## 🎯 목표 정리


### 장기 목표


- 다양한 페르소나(나이·소득·가족·직업위험도 등)에 대해 시장 현실과 약관 구조를 반영한 “표준 보장 기준표”를 구축하고, 보장분석 GPT가 해당 기준을 바탕으로 일관된 권장 금액·구조·판단근거를 생성하도록 하는 것

- 실손·정액담보·후유장해·사망을 포함한 전 영역에서 “과소보장/과보장 최소화 + 예산 제약 + 재정 지속 가능성”을 동시에 고려하는 정량·정성 모델을 정립하는 것

### 단기 목표


- `"표준값 × 보정계수 + 캡"` 구조를 모든 정액담보·후유장해·사망·실손 계산에 일관되게 적용할 수 있도록 기준 테이블·보정계수·캡 규칙을 안정화

- 표준 CSV 자동 생성 스크립트가 생성한 960개 파일을 기준으로, 실제 PDF 분석·백엔드 파이프라인·프론트엔드 연동에서 문제 없이 활용 가능한지 검증 흐름을 준비

## ⚙️ 진행 및 이슈


- **보장 기준 수식 구조 개선**

- **실손 단계형 조정 및 구조 재정의**

- **CSV 자동 생성 스크립트 개편**

- **설계·수식 관점 개선 포인트 도출**

## 🧠 느낀 점 및 개선


- 수식·CSV·코드 구조를 통합적으로 개편하면서 “시장 표준값 → 보정계수 → 캡 → 페르소나별 결과”로 이어지는 흐름이 보다 명확해졌고, 이후 약관 한도·통계 데이터를 추가로 결합할 수 있는 여지가 정리됨

- 산출 결과가 현실적인 범위 안에 들어오도록 한도·계수·배수 구조를 설계했으나, 실제 보험료 수준·상품 레벨의 약관 조건을 더 반영해야 완성도 있는 기준표가 될 것으로 보이며, 이 부분에 대한 후속 조사가 필요함

## 🤝 협업 및 커뮤니케이션


- 오늘은 주로 단독 설계·코드 개편·로직 검토 위주의 업무 진행이었으며, 팀 단위 의사결정이 필요한 영역(시장 한도·상품 선택 기준·예산 제약 로직 등)은 추후 KR3/제품팀과 논의가 필요한 항목으로 별도 정리함

## 📚 참고 및 학습 내용


- 시장에서 통용되는 진단비·수술비·후유장해·사망 보험금 수준과 실손 한도 구조를 검토하며, “표준값 + 보정계수 + 캡”으로 모델링하는 방식의 적절성을 점검함

- 나이·소득·부양가족·위험노출 정도에 따라 단계형으로 금액을 조정하는 설계 패턴을 정리하여, 향후 다른 보장군이나 신규 특약에도 확장 가능한 일반 규칙으로 재구성함

## 📈 성과 및 지표


- 960개 표준 CSV를 새 구조로 전면 재생성함으로써, 보장분석 GPT가 참조할 기준 데이터셋을 한 번에 갱신 가능한 상태로 정비함

- 대표 페르소나 2개 케이스에 대해, 암·뇌·심장·실손·후유장해·사망 금액이 “시장 통념 범위 내 + 페르소나 특성을 반영한 차이”를 갖도록 조정 완료함

## 🗓️ 내일 계획


- 새로 생성한 표준 CSV를 실제 PDF 가입내역 분석 파이프라인에 연결하여, 보장 매칭·차이 분석·진단 코멘트 생성까지 엔드투엔드 테스트 수행

- 프론트엔드 연동을 고려해, 실손 한도·정액담보 금액·후유장해·사망 등을 어떤 형식으로 사용자 화면에 노출할지(텍스트/범위/권장값) 출력 스펙을 정리

- 직업 세분화·위험직군, 건강상태·가족력·과거 병력 등 추가 변수에 따른 보정계수를 어떻게 구조화할지 설계 초안을 작성하고, 점진적 확장 전략을 정리

```json
당신은 ‘업무일지와 회고 정리 전문가’다.  
아래 사용자의 입력을 바탕으로 하루치 업무일지를 Markdown 형식으로 작성하라.  
입력이 비어 있으면 디폴트 예시 내용을 넣는다.  
결과는 실제 업무 문서에 기록 가능한 수준의 정확성·간결성을 유지하라.

---

입력 형식:
[업무 내용]
1. 자료 조사 업무
"""
📌 2025-12-01(월) 업무일지
1. 보장분석 기준 수식 구조 개선

기존 보장금액 산출 방식이 “소득·나이 증가 → 보장금액 무한 확대” 문제가 있음을 확인.

이를 해결하기 위해 시장 표준값 기반의 하향식(top-down) 구조 초안 설계:

정액담보: 표준값(min~max) × 보정계수 × 캡 방식 재정립

후유장해/사망: 연소득 배수 방식 유지하되 부양가족·연령 반영 강화

실손 보장에 대해 기존 고정값 문제를 해결하기 위해 단계형 조정 모델 설계:

입원/통원/배상책임 각각에 대해 나이·소득·부양가족 기반의 동적 산출 로직 구성

실손은 단독상품 구조(한도 방식) 특성상 “개별 가입금액”이 아니라 “보장한도 범위”로 산출되도록 방향 재정립

2. 전체 보장항목 구조 점검·보완

‘필수 보장명세트’를 재점검하고 여러 담보의 빠진 부분 확인 후 표준 담보구성 확정:

실손/암/뇌/심장/수술/후유장해/사망 전체 항목 일괄 통일

치료비 공백 영역(입원·통원·배상)의 필요성 재확인 및 반영

3. CSV 자동 생성 스크립트 검토

전체 200+ 조합의 페르소나에 대해 CSV를 자동 생성하는 구조 완성.

함수 구조:

calc_silson_amount(단계형 실손)

calc_standard_amount(표준값 × 보정계수 구조)

calc_renew_ratio, calc_term_ratio(갱신·종신 비중)

generate_judgment(판단근거 자동 생성)

전체 로직의 현실성과 시장성을 검토하며 개선 포인트 도출.

4. 전체 수식·설계에 대한 개선점 분석

오늘 최종적으로 다음과 같은 보완 영역을 정리함:

시장 약관 한도 필요

담보 우선순위 기반 예산 제약 고려 필요

의료비·청구 통계 기반 금액 설계 필요

중복 담보 및 과보장 방지 로직 필요

갱신/비갱신·정기/종신의 보험료 인상·리스크 반영 필요

고객 재정 여력(보험료 지속 납입 가능성) 고려 필요

의료비 인플레이션(미래 의료비 상승) 고려 필요

건강상태·가족력·직업위험 추가요소 필요
"""
2. 코드 업무
"""
# 2025-12-01 작업 요약

## 개요

CSV 생성 로직을 기존 `base × weight × scale` 방식에서 **시장 현실 기반 "표준값 × 보정계수 + 캡"** 구조로 전면 개편하였습니다.

---

## 커밋 내역

| 커밋 해시 | 메시지 | 변경 파일 |
|-----------|--------|-----------|
| `58d5b14` | refactor: CSV 생성 로직을 '표준값 × 보정계수 + 캡' 구조로 개편 | 961개 (스크립트 1 + CSV 960) |
| `11f502e` | refactor: 백엔드 구조 개편 및 페르소나 기반 표준 CSV 시스템 도입 | 다수 (구조 변경) |

---

## 주요 변경 내용

### 1. 기존 계산 방식의 문제점

기존 `base × weight × scale` 방식은:
- 비현실적인 금액이 산출됨 (일반암 3.96억원 등)
- 시장 표준과 괴리가 큼
- 보정 로직이 복잡하고 직관적이지 않음

### 2. 새로운 계산 구조: "표준값 × 보정계수 + 캡"

#### 2.1 표준 보장금액 테이블 (COVERAGE_STANDARDS)

시장 현실을 반영한 고정 표준값 도입:

```python
COVERAGE_STANDARDS = {
    # 암 진단 (단위: 만원)
    "일반암진단":     {"min": 5000,  "max": 10000, "category": "diagnosis"},
    "고액암진단":     {"min": 10000, "max": 20000, "category": "diagnosis"},
    "유사암진단":     {"min": 500,   "max": 1000,  "category": "diagnosis"},
    "특정암진단":     {"min": 1000,  "max": 3000,  "category": "diagnosis"},

    # 뇌 진단
    "뇌혈관질환진단": {"min": 3000,  "max": 5000,  "category": "diagnosis"},
    "뇌출혈진단":     {"min": 3000,  "max": 5000,  "category": "diagnosis"},
    "뇌경색진단":     {"min": 3000,  "max": 5000,  "category": "diagnosis"},

    # 심장 진단
    "허혈성심장질환진단": {"min": 2000, "max": 4000, "category": "diagnosis"},
    "급성심근경색진단":   {"min": 3000, "max": 5000, "category": "diagnosis"},

    # 수술 (일반)
    "질병수술":       {"min": 50,   "max": 300,   "category": "surgery_minor"},
    "상해수술":       {"min": 50,   "max": 300,   "category": "surgery_minor"},

    # 수술 (고난도)
    "질병종수술":     {"min": 300,  "max": 1000,  "category": "surgery_major"},
    "상해종수술":     {"min": 300,  "max": 1000,  "category": "surgery_major"},
    "뇌혈관질환수술": {"min": 500,  "max": 1500,  "category": "surgery_major"},
    "암수술":         {"min": 500,  "max": 1500,  "category": "surgery_major"},
    "허혈성심장수술": {"min": 500,  "max": 1500,  "category": "surgery_major"},

    # 후유장해 (연소득 배수)
    "상해후유장해":   {"min_ratio": 0.5, "max_ratio": 1.5, "category": "disability"},
    "질병후유장해":   {"min_ratio": 0.5, "max_ratio": 1.5, "category": "disability"},
}
```

#### 2.2 보정 계수 시스템

```python
AGE_FACTOR = {"20s": 1.0, "30s": 1.0, "40s": 1.1, "50s": 1.2, "60s": 1.2}
DEPENDENTS_FACTOR = {0: 1.0, 1: 1.1, 2: 1.2, 3: 1.2}
INCOME_FACTOR = {300: 0.8, 500: 1.0, 700: 1.1, 1000: 1.2}
```

- **나이 계수**: 40대부터 +10%, 50~60대 +20%
- **부양가족 계수**: 1명 +10%, 2명 이상 +20%
- **소득 계수**: 저소득(300만) -20%, 고소득(1000만) +20%

#### 2.3 캡 적용

```python
max_cap = round(std["max"] * 1.5)
max_amt = min(max_amt, max_cap)
```

표준 최대값의 1.5배를 넘지 않도록 제한하여 비현실적 금액 방지.

### 3. 실손 담보 단계형 조정

기존 고정값 대신 **나이/소득/부양가족 반영한 단계형 조정** 적용:

```python
def calc_silson_amount(cov_name: str, income: int, a_norm: float, f_norm: float) -> tuple:
    """
    실손 담보 금액 계산 (단계형 조정)
    - 입원: 나이 반영 (20대 3000~5000 → 60대 5000~10000)
    - 통원: 나이 반영 (20대 20~30 → 60대 30~50)
    - 배상책임: 소득/부양가족 반영 (1억 ~ 3억)
    """
    if "입원의료비" in cov_name:
        min_amt = round(3000 + 2000 * a_norm)  # 3000~5000
        max_amt = round(5000 + 5000 * a_norm)  # 5000~10000
        return min_amt, max_amt

    if "통원의료비" in cov_name:
        min_amt = round(20 + 10 * a_norm)  # 20~30
        max_amt = round(30 + 20 * a_norm)  # 30~50
        return min_amt, max_amt

    if "배상책임" in cov_name:
        if income >= 1000 and f_norm >= 0.66:
            return 20000, 30000  # 2억~3억
        elif income >= 700 or f_norm >= 0.66:
            return 10000, 20000  # 1억~2억
        else:
            return 10000, 10000  # 1억 고정
```

#### 입원의료비 (나이별)

| 나이대 | 최소 | 최대 |
|--------|------|------|
| 20대 | 3444만 | 6111만 |
| 30대 | 3667만 | 6667만 |
| 40대 | 3889만 | 7222만 |
| 50대 | 4111만 | 7778만 |
| 60대 | 4333만 | 8333만 |

#### 통원의료비 (나이별)

| 나이대 | 최소 | 최대 |
|--------|------|------|
| 20대 | 22만 | 34만 |
| 30대 | 23만 | 37만 |
| 40대 | 24만 | 39만 |
| 50대 | 26만 | 41만 |
| 60대 | 27만 | 44만 |

#### 배상책임 (소득/부양가족별)

| 조건 | 금액 |
|------|------|
| 월소득 1000만 이상 + 부양가족 2명 이상 | 2억~3억 |
| 월소득 700만 이상 또는 부양가족 2명 이상 | 1억~2억 |
| 기타 | 1억 고정 |

---

## 결과 검증

### 생성된 CSV 비교

#### 30대 남성 사무직 월소득500만 미혼 부양가족0명

| 보장명 | 최소 | 최대 |
|--------|------|------|
| 상해입원의료비 | 3667만 | 6667만 |
| 질병입원의료비 | 3667만 | 6667만 |
| 상해통원의료비 | 23만 | 37만 |
| 질병통원의료비 | 23만 | 37만 |
| 일상생활배상책임 | 1억 | 1억 |
| 일반암진단 | 5000만 | 10000만 |
| 고액암진단 | 10000만 | 20000만 |
| 뇌혈관질환진단 | 3000만 | 5000만 |
| 급성심근경색진단 | 3000만 | 5000만 |
| 상해후유장해 | 3000만 | 9000만 |
| 질병사망 | 6000만 | 18000만 |

#### 50대 남성 사무직 월소득1000만 기혼 부양가족2명

| 보장명 | 최소 | 최대 |
|--------|------|------|
| 상해입원의료비 | 4111만 | 7778만 |
| 질병입원의료비 | 4111만 | 7778만 |
| 상해통원의료비 | 26만 | 41만 |
| 질병통원의료비 | 26만 | 41만 |
| 일상생활배상책임 | 2억 | 3억 |
| 일반암진단 | 8640만 | 15000만 (캡) |
| 고액암진단 | 17280만 | 30000만 (캡) |
| 뇌혈관질환진단 | 5184만 | 7500만 (캡) |
| 급성심근경색진단 | 5184만 | 7500만 (캡) |
| 상해후유장해 | 7200만 | 21600만 |
| 질병사망 | 14400만 | 43200만 |

---

## 파일 변경 목록

### 수정된 파일

1. **scripts/generate_standard_csv.py** - 전면 개편
   - 담보 타입 재정의 (5개 타입)
   - COVERAGE_STANDARDS 테이블 추가
   - 보정계수 시스템 추가
   - calc_silson_amount() 함수 추가
   - calc_standard_amount() 함수 추가 (표준값 × 보정계수 + 캡)
   - generate_judgment() 함수 개선

### 재생성된 파일

2. **data/standard_generated/*.csv** - 960개 전체 재생성

---

## 백엔드 영향 분석

**결론: 수정 불필요**

- CSV 스키마(컬럼 구조) 변경 없음
- backend/analyzer.py의 로직 그대로 동작
- 표준 CSV 로드 → 매칭 → 진단 파이프라인 정상 작동

---

## 다음 작업 예정

1. 실제 PDF로 분석 테스트
2. 프론트엔드 연동
3. 추가 페르소나 옵션 검토 (직업 세분화 등)

---

## 기술적 고려사항

### 캡의 필요성

보정계수가 누적되면 (예: 50대 × 부양가족2명 × 고소득 = 1.2 × 1.2 × 1.2 = 1.728) 표준값이 과도하게 증가할 수 있음. 캡을 통해:
- 일반암 최대 15000만원 (표준 10000 × 1.5)
- 고액암 최대 30000만원 (표준 20000 × 1.5)

### 실손의 특수성

실손은 시장에서 거의 표준화된 상품이므로:
- 갱신형 고정 (10:0)
- 4세대 실손 권장
- 금액은 한도 범위를 제시하되 실제 보장은 실비 기준

---

## 참고: 계산 공식 요약

```
진단/수술 금액 = 표준값 × 나이계수 × 부양가족계수 × 소득계수
                (단, 최대값은 표준최대 × 1.5 캡 적용)

후유장해 금액 = 연소득 × 배수(0.5~1.5) × 부양가족계수

사망 금액 = 연소득 × 배수(1~3) × 부양가족계수

실손 입원 = 3000 + 2000 × 나이정규화 ~ 5000 + 5000 × 나이정규화
실손 통원 = 20 + 10 × 나이정규화 ~ 30 + 20 × 나이정규화
실손 배상 = 소득/부양가족에 따른 단계형 (1억/1~2억/2~3억)
```
"""

[느낀 점]
1. 딱히 없음. 내 것을 잘 하자.

---

출력 양식:

# 📅 날짜: (예: 25.11.11 (화))

## 🧩 주요 업무
- 오늘 수행한 핵심 업무를 구체적으로 요약  
- 기술적 결과, 진행 상황, 산출물 등을 명시  

## 🎯 목표 정리
### 장기 목표
- 프로젝트의 중장기적 방향 또는 최종 지향점  
### 단기 목표
- 오늘 혹은 이번 주 달성 목표  

## ⚙️ 진행 및 이슈
- 진행 단계별 구체적 내용  
- 발생한 문제와 해결 과정  
- 미해결 과제 및 후속 조치  

## 🧠 느낀 점 및 개선
- 사용자 입력 기반으로 정리된 통찰, 개선 아이디어, 학습 내용  

## 🤝 협업 및 커뮤니케이션
- 회의, 보고, 협업 이슈, 의사소통 내용 정리  
- 논의된 결정사항 및 향후 조율 방향  

## 📚 참고 및 학습 내용
- 새로 학습하거나 참고한 기술·논문·문서  
- 업무 개선에 도움이 된 개념 또는 자료  

## 📈 성과 및 지표
- 정량적 성과(예: 정확도, 속도, 효율 등)  
- 수치가 없을 경우 주요 진척도를 서술  

## 🗓️ 내일 계획
- 다음 업무 목표 및 우선순위  
- 예상 리스크 및 대비책  

---

지침:
1. 전체 분량은 500~650단어 이내로 유지한다.  
2. 문장은 명사형·서술형으로 끝내며, 감정적 표현은 제외한다.  
3. 입력이 비어 있으면 아래 기본 내용을 자동으로 채운다.
4. 날짜는 월화수목금의 요일만 사용한다.

---

[기본 디폴트 예시]
- **업무 내용**: LangChain 실습 복습, 문서 분석 코드 개선, 팀 회의 참석  
- **느낀 점**: 구조화된 학습이 업무 이해에 도움됨. 반복 작업 효율 개선 필요.
```

