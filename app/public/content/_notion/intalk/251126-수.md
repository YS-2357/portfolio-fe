---
태그: []
날짜: "2025-11-26"
이름: "25.11.26 (수)"
---

# 25.11.26 (수)




# 📅 날짜: 25.11.26 (수)


## 🧩 주요 업무


- 보장분석 백엔드의 디버그 로그 체계 개선 및 평가 지표 명칭 정비

- PDF 파싱 결과와 표준 CSV 간 보장명 불일치 문제 분석 및 별칭 매핑(COVERAGE_ALIAS) 구조 설계

- 실손 담보(상해/질병 입원·통원 등)에 대한 별도 처리 로직 추가 및 보장명 정규화 함수 구현

- KR 회의에서 KR1·KR2·KR3별 Bottom Line 달성을 위한 액션 플랜 및 담당자 매핑 정리

## 🎯 목표 정리


### 장기 목표


- 보장명·담보 구조가 제각각인 실제 보험가입내역서에서도 안정적으로 동작하는 보장분석 GPT 백엔드 구축

- 고객 문서·표준 기준표·LLM 진단 결과를 일관된 로깅·평가·설명 체계로 관리할 수 있는 기술 인프라 확립

### 단기 목표


- 보장명 매칭 정확도 향상(파싱 결과와 표준 CSV 간 매칭 실패 최소화)

- 실손 담보를 기존 정액담보와 동일 분석 파이프라인 안에서 처리 가능하도록 로직 정비

- KR3(기술혁명) 관점에서 “표준 보험가입내역서 Feature 결정”과 연계되는 코드 기반 준비 완료

## ⚙️ 진행 및 이슈


- **디버그 로그 체계 개선**

- **평가지표 명칭 조정**

- **보장명 별칭 매핑 및 실손 처리 로직**

- **README 및 문서화**

## 🧠 느낀 점 및 개선


- 보장명·보장내용이 보험사·상품마다 다르게 표기되는 현실을 코드 레벨에서 수용하기 위해서는, 초기에 별칭 사전과 정규화 규칙을 충분히 설계하는 것이 중요함을 재확인

- 평가 지표 명칭과 디버그 로그 구조를 명확히 해두면, 이후 LLM 프롬프트 튜닝 및 진단 품질 개선 과정에서 논의 비용을 줄일 수 있음을 인지

- 개인적으로는 현재 조직 상황과 별개로, 축적한 기준표·코드·질문지 구조가 향후 다른 환경에서도 활용 가능한 자산이 될 수 있도록 재사용성과 독립성을 고려한 설계를 지속할 필요가 있음

## 🤝 협업 및 커뮤니케이션


- KR 회의에서 KR1·KR2·KR3별 Bottom Line 달성을 위해 필요한 액션 아이템을 세분화하고 담당자를 명시함

- KR3 항목에서 “표준 보험가입내역서 결정”에 KR3 전원이 참여하는 구조가 확인되었고, 오늘 진행한 보장명 매칭·실손 처리 설계는 해당 작업의 기술 기반으로 활용 가능

## 📚 참고 및 학습 내용


- 로깅 체계 설계 시 INPUT/OUTPUT/COMPARE 등 구분된 로그 타입을 두어 디버깅·평가 목적을 분리하는 방식

- LLM 평가 기준으로서 “Grounding Score” 개념(정답률이 아닌, 기준 데이터 반영 정도를 측정하는 지표)의 명명과 활용 관점

- 도메인 용어가 다양한 보험 데이터에서 별칭 사전과 정규화 함수의 역할, 특히 실손처럼 구조·명칭이 다른 담보를 통합하는 패턴

## 📈 성과 및 지표


- COVERAGE_ALIAS에 100개 이상 보장명 별칭을 정리하여, PDF 파싱 결과와 표준 CSV 간 매칭 성공 가능성 향상 기반 구축

- 실손 담보(`type="실손"`)에 대한 별도 처리 경로를 마련하여, 향후 보장분석 결과에 실손 영역을 포함할 수 있는 구조 확보

- Grounding Score 도입 및 COMPARE 로그 추가로, LLM 코멘트가 CSV 판단근거를 얼마나 반영하는지에 대한 정량 평가 준비 완료

## 🗓️ 내일 계획


- 실손 “상해”, “질병” 단독 용어에 대한 매핑 기준(예: 상해입원/질병입원의료비 연결 규칙) 확정

- 별칭 매핑 로직에 대한 테스트 케이스 작성 및 실제 PDF 샘플 기반 매칭 정확도 검증

- Grounding Score 계산·집계 방식 초안 정리 및 리포트 포맷 설계

- KR3 관점에서 표준 보험가입내역서 Feature 리스트와 현재 코드 구조를 연결하는 정리 문서 초안 작성

```json
당신은 ‘업무일지와 회고 정리 전문가’다.  
아래 사용자의 입력을 바탕으로 하루치 업무일지를 Markdown 형식으로 작성하라.  
입력이 비어 있으면 디폴트 예시 내용을 넣는다.  
결과는 실제 업무 문서에 기록 가능한 수준의 정확성·간결성을 유지하라.

---

입력 형식:
[업무 내용]
1. 코드 진행
"""
# 작업 일지 - 2025-11-26

## 목표

보장명 매칭 정확도 개선 및 실손 처리 로직 추가

---

## 오전: 디버그 로그 개선 및 평가 지표 명확화

### 1. 디버그 로그 개선

기존 디버그 로그가 INPUT/OUTPUT 구분이 불명확하여 개선

**config.py 수정:**
```python
def debug_log(step: str, data=None, log_type: str = "info"):
    """
    log_type: "info", "input", "output", "compare"
    """
    if log_type == "input":
        prefix = ">>> INPUT"
        border = ">"
    elif log_type == "output":
        prefix = "<<< OUTPUT"
        border = "<"
    elif log_type == "compare":
        prefix = "=== COMPARE"
        border = "="
    # ...
```

**적용 파일:**
- `nodes.py`: 각 노드별 INPUT/OUTPUT 로그 분리
- `diagnosis.py`: 평가 노드에 COMPARE 로그 추가 (CSV 판단근거 vs LLM 코멘트)

### 2. 평가 지표 명칭 변경

`recall_score` → `grounding_score`로 변경

**변경 이유:**
- 기존 명칭이 ML의 Recall과 혼동될 수 있음
- 실제로 측정하는 것은 "CSV 판단근거가 LLM 코멘트에 반영되었는지" 여부
- "Grounding Score"가 더 정확한 의미 전달

**수정 파일:**
- `schemas.py`: `recall_score` → `grounding_score`
- `diagnosis.py`: 변수명 및 로그 메시지 변경
- `nodes.py`: 출력 포맷 변경
- `main.py`: 결과 출력 변경

---

## 오후: 보장명 별칭 매핑 및 실손 처리

### 1. 문제점 발견

PDF에서 파싱된 보장명과 CSV 표준 보장명이 불일치하여 매칭 실패

**예시:**
```
PDF 보장명     CSV 표준 보장명
암진단      ≠  일반암진단
고액암      ≠  고액암진단
소액암      ≠  소액암진단(유사암)
```

### 2. 해결: COVERAGE_ALIAS 매핑

`matching.py`에 100개 이상의 별칭 매핑 추가

```python
COVERAGE_ALIAS = {
    # ========== 암 ==========
    "암진단": "일반암진단",
    "고액암": "고액암진단",
    "소액암": "소액암진단(유사암)",

    # ========== 뇌혈관 ==========
    "뇌출혈": "뇌출혈진단",
    "뇌혈관": "뇌혈관질환진단",

    # ========== 심장 ==========
    "심근경색": "급성심근경색진단",
    "허혈성심장": "허혈성심장질환진단",

    # ========== 입원·통원·실손 ==========
    "상해입원": "상해입원의료비",
    "질병입원": "질병입원의료비",
    # ... 100개 이상 매핑
}
```

### 3. 실손 처리 로직 추가

**문제:** 실손 데이터는 `type="실손"`으로 별도 테이블에 있어 기존 로직에서 처리 안 됨

**해결:**

`_normalize_coverage_name()` - 괄호 제거 로직 추가:
```python
def _normalize_coverage_name(name: str) -> str:
    # 괄호 내용 제거 (예: "상해입원(급여)" → "상해입원")
    name = re.sub(r'\([^)]*\)', '', name).strip()
    return COVERAGE_ALIAS.get(name, name)
```

`_group_customer_by_name()` - 실손 타입 처리 추가:
```python
# 정액상세 또는 실손만 처리
if doc_type not in ("정액상세", "실손"):
    continue

# 보장명 추출 (정액상세: 보장명, 실손: 보장내용)
if doc_type == "정액상세":
    원본_보장명 = meta.get("보장명", "")
else:  # 실손
    원본_보장명 = meta.get("보장내용", "")
```

**처리 흐름:**
```
실손: "상해입원(급여)" → 괄호 제거 → "상해입원" → 별칭 매핑 → "상해입원의료비"
```

### 4. README 업데이트

"보장명 매칭 로직" 섹션 추가

---

## 미해결 사항

- 실손 "상해", "질병" 단독 매핑 규칙 결정 필요

## 다음 단계

- [ ] 실손 "상해", "질병" 단독 매핑 규칙 결정
- [ ] 테스트 실행하여 매칭 정확도 검증
- [ ] 추가 별칭 발견 시 COVERAGE_ALIAS 확장
"""
2. 회의내용
"""
KR
15분+15분
Bottom Line 달성까지
가장 중요하고 시급한 Acion Planning
(Brain Dump 참고, 본질에 집중/창의적 문제해결)
Bottom Line달성을 위하여
 해야할 일 쪼개기+담당자 설정
OK, Action List Up
업무 담당자
Lead가 결정,
Team Lead 확인
KR1(고객가치)
① ICP (10/25): 기존에 반응이 있었거나 채용 니즈가 확실한 GA 지사 -> 전화(TM) 후 미팅/줌 유도, 그 외 (56/100): 중소형 GA, 신규 리스트 -> 문자/카톡(콜드 메시지)
② 인톡 파트너스 개인정보 제3자 제공 방안 해결
③ 랜딩 페이지 최적화(메인 카피를 "인톡케어 소개"가 아닌 “무료 설계사 DB 00건 즉시 확인하기"로 임시 변경하여 이탈률 최소화.) A/B 테스트
④ 업세일즈 포인트 (FOMO 자극) -> 무료로 제공된 DB 외에, 지금 스카우터를 구독하시면, 내일 들어오는 신규 DB도 가장 먼저 알림을 받으실 수 있습니다"라는 메시지로 유료 기능의 필요성을 인지
⑤ 인톡 케어, 인톡 파트너스 탭핑 메뉴얼 작성
① GA 리스트 500명 탭핑
② 인톡 파트너스 개인정보 제3자 제공 방안 해결(인톡케어 이용 약관, 인톡파트너스 이용 약관)
③ 인톡 케어 랜딩 페이지쪽 필요한 부분만 남기기 및 A,B 테스트를 위한 작업 진행
④ '지역 기반' 경쟁 심리 자극, '손실 회피(Loss Aversion)' 자극, '한정된 TO' (Scarcity) 강조 미반응 GA 대응, 피드백 플랜 수립
⑤ 
① 김준혁
② 김건
③ 박민규, 이하연
④ 김건
⑤ 김건
KR2 (제품서비스)
① 코드 정리 및 버그 수정
② 파트너스에서 신청 폼 crm 2.0과 호환되게 수정 , sql 서버 연동
③ 관리자 페이지 결제 로그
④ 교체관리 A/S신청 승인 불가 문제 해결
⑤크레딧 구매 기능 구현
⑥이메일 인증 & 비밀번호 찾기
⑦건님[BE] 인수인계
① “”
② “”
③ “”
④ “”
⑤ “”
①임정빈
②임정빈, 김승준
③임정빈, 김승준
④임정빈, 김승준
⑤임정빈, 김승준
⑥임정빈, 김승준
⑦김건
KR3 (기술혁명)
① 채널 확대 + 설문 25개
② 표준 보험가입내역서 Feature 결정
③ GA 대상, 표준 보험가입내역서 바탕 협력 제안서 작성
④ inblog, 네이버 블로그
⑤
① 채널 확대 + 설문 25개
walla 변경, 채널 & 비용 탐색
② 표준 보험가입내역서 결정
각자 필요 특성 분석, 도메인 공부
③ 2번 결과 바탕으로 협력서 작성
④ inblog, 네이버 블로그
⑤ 
① 정수민
② KR3 전원
③ 정영선
④ 정수민
⑤  
"""

[느낀 점]
1. 다들 회사에 대한 반감을 갖고 있다. 최대한 빠르게 내 사이드프로젝트를 완성하여 배포하고 다른 직장을 알아봐야겠다.

---

출력 양식:

# 📅 날짜: (예: 25.11.11 (화))

## 🧩 주요 업무
- 오늘 수행한 핵심 업무를 구체적으로 요약  
- 기술적 결과, 진행 상황, 산출물 등을 명시  

## 🎯 목표 정리
### 장기 목표
- 프로젝트의 중장기적 방향 또는 최종 지향점  
### 단기 목표
- 오늘 혹은 이번 주 달성 목표  

## ⚙️ 진행 및 이슈
- 진행 단계별 구체적 내용  
- 발생한 문제와 해결 과정  
- 미해결 과제 및 후속 조치  

## 🧠 느낀 점 및 개선
- 사용자 입력 기반으로 정리된 통찰, 개선 아이디어, 학습 내용  

## 🤝 협업 및 커뮤니케이션
- 회의, 보고, 협업 이슈, 의사소통 내용 정리  
- 논의된 결정사항 및 향후 조율 방향  

## 📚 참고 및 학습 내용
- 새로 학습하거나 참고한 기술·논문·문서  
- 업무 개선에 도움이 된 개념 또는 자료  

## 📈 성과 및 지표
- 정량적 성과(예: 정확도, 속도, 효율 등)  
- 수치가 없을 경우 주요 진척도를 서술  

## 🗓️ 내일 계획
- 다음 업무 목표 및 우선순위  
- 예상 리스크 및 대비책  

---

지침:
1. 전체 분량은 500~650단어 이내로 유지한다.  
2. 문장은 명사형·서술형으로 끝내며, 감정적 표현은 제외한다.  
3. 입력이 비어 있으면 아래 기본 내용을 자동으로 채운다.
4. 날짜는 월화수목금의 요일만 사용한다.

---

[기본 디폴트 예시]
- **업무 내용**: LangChain 실습 복습, 문서 분석 코드 개선, 팀 회의 참석  
- **느낀 점**: 구조화된 학습이 업무 이해에 도움됨. 반복 작업 효율 개선 필요.
```

