---
태그: []
날짜: "2026-01-02"
이름: "26.01.02 (금)"
---

# 26.01.02 (금)


# 📅 날짜: 26.01.02 (금)


## 🧩 주요 업무


- 인톡 인수인계 문서 초안 작성 및 “다음 사람이 막히지 않는 정보만 남기는” 편집 원칙 확정함.

- 기본 셋팅(노션/슬랙/GitHub/LLM 콘솔) 절차, 계정·권한·비용 항목을 우선순위로 정리하고 누락 항목을 식별함.

- 프로젝트별 상태를 정리하여 중단(insure-gpt), 유지보수 담당(partnersAI), 기획/MVP(scriptmate-be)로 구분하고 폐기 사유와 책임 범위를 명확화함.

- STT+LLM 기반 실시간 전화 가이드 앱 방향을 재검토하고, 문서 v0.1→v0.3까지 범위 축소·표현 안전화·핵심 요약본을 산출함.

- 기술 스택 결정을 문서화하여 Backend(FastAPI), Mobile(React Native), STT(클로바), LLM(GPT-4+Claude), DB(PostgreSQL+Redis), VoIP(WebRTC 직접 구현) 결정을 기록하고 보류 항목(Phase 2)을 분리함.

- scriptmate-be 대규모 리팩토링으로 모놀리식 구조를 기능 단위로 분리하고 문서화 체계를 구축하여 유지보수 가능 상태로 전환함.

## 🎯 목표 정리


### 장기 목표


- 인수인계 문서를 “실행 가능한 운영 문서” 수준으로 고정하여 계정/권한/비용/리포지토리/배포·실행 절차가 단절 없이 이어지도록 하는 목표 설정함.

- 실시간 전화 가이드(Phase 2)와 대본 작성 도우미(MVP)의 범위를 분리하여, 리스크가 낮은 기능부터 검증하는 제품 전략 확립 목표 설정함.

### 단기 목표


- scriptmate-be를 대본 생성/검토 중심으로 서버 실행 가능 상태까지 끌어올리고, Firebase 포함 실행 점검을 완료하는 목표 설정함.

- 인수인계 문서에서 프로젝트별 “필수 링크/실행 명령/환경 변수/담당자”를 최소 단위로 완성하는 목표 설정함.

## ⚙️ 진행 및 이슈


- **인수인계 문서 구성**

- **문서 범위 축소 및 안전화**

- **기술 결정 및 방향 전환**

- **scriptmate-be 리팩토링**

## 🧠 느낀 점 및 개선


- 기획 문서에서 “목표 사용자-핵심 가치-최소 검증 단위”를 먼저 고정하고, 기술 상세는 결정 문서로 분리하는 방식이 유효함.

- 실시간 통화 기능은 규제·품질·연동 리스크가 커서, 대본 작성 도우미로 검증 후 Phase 2로 확장하는 접근이 합리적임.

- 인수인계 문서는 배경 설명보다 실행 절차와 책임 경계가 핵심이며, 누락 시 즉시 막히는 항목부터 채우는 방식이 필요함.

## 🤝 협업 및 커뮤니케이션


- 프로젝트 컨셉을 랜딩 문서 기반으로 공유하고 “실제 목표는 실시간 전화 가이드”임을 정리하여 팀 내 기대치를 정렬함.

- ChatGPT 피드백을 통해 범위 과대, 위험 문구, 과도한 목표치를 제거하고 문서 품질을 개선함.

- VoIP 방식(WebRTC 직접 구현 vs SDK)에서 의사결정 근거(자유도/비용 vs 속도/리스크)를 테이블 형태로 정리함.

## 📚 참고 및 학습 내용


- FastAPI 기반 기능 분리 패턴(features/ + schemas/ + service)과 설정 중앙집중(pydantic-settings) 적용 방식 정리함.

- LangGraph 워크플로우 분리(llm/graph) 및 결과 표준화(Result 패턴, 에러 코드) 문서화 기준 수립함.

- 문서 작성에서 “MVP 범위 선언, 제외 항목 명시, 트리거-카드 매핑, 운영 가드레일(책임 고지/쿨다운)” 구성 요소를 재사용 가능한 템플릿으로 확보함.

## 📈 성과 및 지표


- 인수인계 문서 초안 및 보완 체크리스트 산출, 셋업/계정/권한/비용 항목 식별 완료함.

- 제품 문서 2종(기획 1장, 기술 결정 3장) 최종본 확보 및 90% 이상 압축 요약본 산출함.

- scriptmate-be 리팩토링으로 39개 파일 변경(+1742/-493) 규모의 구조 전환 완료함.

- 모듈 경로 점검 20/20 확인, import 테스트 7/10 성공으로 실행 전 단계 검증 완료함.

## 🗓️ 내일 계획


- scriptmate-be 서버 실행 테스트 수행, firebase_admin 설치 포함 런타임 의존성 정리함.

- `_deprecated/` 보류 기능의 재도입 조건(Phase 2 기준)과 제거 기준을 문서에 명확히 기록함.

- 인수인계 문서에 프로젝트별 “실행 명령, 환경 변수, 주요 엔드포인트, 담당자, 비용 발생 지점”을 표준 표로 추가함.

- 대본 작성 도우미 코드 확인 후 MVP 범위 재정의 및 프롬프트 초안 작성 필요 시 착수함.

```markdown
당신은 ‘업무일지와 회고 정리 전문가’다.  
아래 사용자의 입력을 바탕으로 하루치 업무일지를 Markdown 형식으로 작성하라.  
입력이 비어 있으면 디폴트 예시 내용을 넣는다.  
결과는 실제 업무 문서에 기록 가능한 수준의 정확성·간결성을 유지하라.

---

입력 형식:
[업무 내용]
1. 기획 및 계획 업무
"""
오늘 수행 업무 리스트

인톡 인수인계 문서 초안 작성

기본 셋팅(노션/슬랙/GitHub/LLM 콘솔) 정리

사용 언어 및 기술 스택 명시

진행·중단 프로젝트 목록 정리

진행 프로젝트 현황 정리

insure-gpt 폐기 사유 명시

partnersAI 현재 담당자 및 상태 정리

scriptmate-be 기획/MVP 단계임을 명확화

인수인계 문서 보완 항목 도출

계정/권한/비용 관련 필수 항목 식별

프로젝트별 추가로 필요한 최소 정보 정리

본인 수행 업무 범위 구조화

인톡 파트너스 2.0 관련 기획·설계 기여 정리

AI 평가/전환/실패 유형 중심 역할 정리

불필요한 내용 제거 기준 설정

“없으면 다음 사람이 막히는 정보”만 남기는 원칙 확정
"""

"""
오늘 작업 내역 정리

1. 프로젝트 컨셉 공유 (시작)

Intalk Partners 랜딩페이지 문서 제공
실제 목표: STT + LLM 기반 실시간 전화 가이드 앱


2. 제품 방향 논의
확인한 내용:

타겟: 보험설계사
핵심 기능: 통화 중 실시간 스크립트 제안 + 컴플라이언스 경고
기술: Python 백엔드, WebSocket, WebRTC
요구사항: 앱 백그라운드에서도 통화 유지


3. 기획 문서 v0.1 작성
포함 내용:

제품 비전 및 핵심 가치
사용자 시나리오 (통화 전/중/후)
화면 구성 (와이어프레임 수준)
데이터 정책 (저장/미저장)
성공 지표 (KPI)
로드맵 (3단계)


4. 개발 문서 v0.1 작성
포함 내용:

시스템 아키텍처 (다이어그램)
기술 스택 (Python/FastAPI/aiortc/WebRTC)
Database 스키마 (PostgreSQL)
REST API + WebSocket 프로토콜 명세
핵심 로직 구현 예시 (Python 코드)
배포 및 모니터링 가이드


5. 외부 피드백 반영 (ChatGPT)
지적 사항:

MVP 범위가 과도함
"양쪽 음성 STT" 표현 위험
PSTN 연동 과대평가
성능 목표 (1000 세션) 불필요


6. 문서 v0.2 작성 (MVP 안전 버전)
주요 변경:

상단에 "MVP 범위 선언" 추가

✅ 확정 / 🔄 미정 / ❌ 제외


과도한 표현 제거

"양쪽 STT" → "설계사만, 고객은 타이밍"
"실시간 전사 UI" → "카드 중심"
"PSTN 기본" → "Phase 2"


MVP 기능 체크리스트 추가
트리거 → 카드 매핑표 추가
절대 하지 않는 것 명시


7. 문서 v0.3 작성 (핵심 요약)
요청: "너무 길다, 핵심만"

기획 문서: 3,000단어 → 300단어 (90% 축소)
개발 문서: 4,500단어 → 400단어 (91% 축소)
A4 1~2장 수준으로 압축


8. 기술 스택 확정
의사결정:

✅ STT: 네이버 클로바
✅ LLM: GPT-4 + Claude (병행)
🔄 VoIP: 직접 구현 vs SDK?


9. VoIP 방식 논의
Claude 추천: SDK (Agora/Twilio)

이유: 빠른 구현, 검증된 품질, 낮은 리스크

당신 결정: WebRTC 직접 구현

이유: 트랙 제어 자유도, 장기 비용 절감


10. 개발 문서 재작성 시도

WebRTC 직접 구현 기준으로 상세 코드 포함
중단: "상세 코드 말고 공유용 핵심만"


11. 최종 문서 작성 (공유용)
기획 문서 (최종)

제품 정의
핵심 기능
화면 구성
운영 원칙 (책임 고지 + 카드 쿨다운)
MVP 목표

기술 결정 문서 (최종)

핵심 결정 사항 테이블
WebRTC 직접 구현 방식 (개념)
오디오/LLM/데이터 처리 흐름
트리거 구현
리스크 및 대응
12주 개발 일정
의사결정 필요 항목


12. 방향 전환 제안
새로운 의견:

대본작성 도우미부터 시작하자
실시간 전화는 나중에
대본작성 도우미 코드 이미 존재

다음 단계:

대본작성 도우미 코드 확인 필요
해당 코드 기반으로 기획 문서 작성


📊 최종 산출물
완성된 문서 (2개)

Intalk - 기획 문서 (A4 1장)
Intalk - 기술 결정 문서 (A4 3장)

확정된 기술 스택

Backend: Python/FastAPI
Frontend: React Native
VoIP: WebRTC 직접 구현
STT: 네이버 클로바
LLM: GPT-4 + Claude
DB: PostgreSQL + Redis

보류된 사항

실시간 전화 가이드 (Phase 2)
대본작성 도우미 우선 진행 검토 중


현재 상태: 대본작성 도우미 코드 확인 대기 중
"""
2. 코드 업무
"""
# 2026-01-02 작업 일지

## 개요

scriptmate-be 프로젝트의 대규모 리팩토링 및 문서화 작업 진행. 3개 프로젝트(insure-gpt, partnersAI, scriptmate-be)의 기술 스택 정리.

---

## 1. scriptmate-be 리팩토링

### 1.1 폴더 구조 변경

기존 모놀리식 구조를 partnersAI 패턴을 참고하여 기능별로 분리.

**변경 전**
```
app/
├── services/
│   ├── ai_service.py (413줄, 모든 LLM 로직)
│   ├── clova_speech/
│   ├── live_guide_service.py
│   └── live_sales_service.py
```

**변경 후**
```
app/
├── features/           # 기능별 분리
│   ├── script/         # 스크립트 생성
│   │   ├── schemas.py
│   │   └── service.py
│   ├── review/         # 스크립트 검토
│   │   ├── schemas.py
│   │   └── service.py
│   └── question/       # Q&A
│       ├── schemas.py
│       └── service.py
├── llm/                # LLM 모듈
│   ├── client.py       # LLM 클라이언트
│   └── graph.py        # LangGraph 워크플로우
├── schemas/            # 공통 스키마
│   ├── result.py       # Result 패턴
│   ├── errors.py       # 에러 코드
│   └── common.py       # UserInfo, ProductInfo 등
├── services/
│   ├── watcher_service.py
│   └── _deprecated/    # 보류 기능
│       ├── clova_speech/
│       ├── live_guide_service.py
│       └── live_sales_service.py
└── config.py           # 중앙집중 설정
```

### 1.2 중앙집중 설정 (config.py)

모든 설정을 `pydantic-settings`로 관리:

```python
class Settings(BaseSettings):
    # LLM
    openai_api_key: str
    llm_model: str = "gpt-4o-mini"
    llm_temperature: float = 0.7

    # 프롬프트
    prompt_dir: str = "prompts"
    prompt_script: str = "script/generate_0.1.0.md"

    # Feature Flags
    feature_script_enabled: bool = True
    feature_live_enabled: bool = False  # 보류
```

### 1.3 보류 기능 분리

팀 논의 결과, 실시간 전화보다 **대본 작성 MVP**를 우선하기로 결정.
- CLOVA Speech, 실시간 가이드 → `_deprecated/`로 이동
- `feature_live_enabled = False`로 비활성화

### 1.4 Import 경로 수정

```python
# 변경 전
from app.services.ai_service import get_graph
from app.services.live_sales_service import ...
from app.services.clova_speech import ...

# 변경 후
from app.llm import get_graph
from app.services._deprecated.live_sales_service import ...
from app.services._deprecated.clova_speech import ...
```

### 1.5 커밋 내역

| 커밋 | 내용 | 변경 |
|------|------|------|
| `e1a20c4` | 화자 분리 기능 및 인식 개선 | 6 files, +487/-225 |
| `0776975` | app/ 폴더 구조 리팩토링 및 문서화 | 39 files, +1742/-493 |

---

## 2. 문서화

### 2.1 생성된 문서

| 파일 | 용도 |
|------|------|
| `AGENTS.md` | Claude Code 가이드, 파일 위치, 새 기능 추가 순서 |
| `SKILLS.md` | 개발 규칙, 네이밍 컨벤션, 실행 명령어 |
| `skills/README.md` | 스킬 스크립트 가이드 |
| `assets/README.md` | 정적 자산 가이드 |
| `references/README.md` | 참조 문서 가이드 |

### 2.2 문서화 규칙

모든 변경사항은 5개 위치에 기록:
1. `SKILLS.md` - 개발 규칙
2. `AGENTS.md` - Claude Code 가이드 + CHANGELOG
3. `skills/` - 스킬 스크립트
4. `assets/` - 정적 자산
5. `references/` - 참조 문서

---

## 3. 기술 스택 비교

3개 프로젝트의 기술 스택 정리 완료.

### 공통 기술
- FastAPI + Uvicorn (백엔드)
- Streamlit (프론트엔드)
- LangChain (LLM 오케스트레이션)
- Pydantic v2 (스키마 검증)

### 프로젝트별 특화

| 프로젝트 | DB | LLM | 특화 기술 |
|----------|-----|-----|----------|
| insure-gpt | CSV/JSON | OpenAI, DeepSeek | pdfplumber, LangGraph |
| partnersAI | SQLite (캐시) | OpenAI, Anthropic | 프롬프트 버전관리 |
| scriptmate-be | Firebase Firestore | OpenAI | gRPC, WebRTC |

### 프로젝트 상태

| 프로젝트 | 상태 | 비고 |
|----------|------|------|
| insure-gpt | 중단 | PDF 데이터 획득 어려움 |
| partnersAI | 개발중 | 4개 미션 구현 완료 |
| scriptmate-be | 개발중 | MVP (대본 생성/검토) |

---

## 4. 기타

### 4.1 의존성 이슈 해결

```bash
# pydantic-settings 버전 충돌
pip install pydantic-settings>=2.10.1
```

### 4.2 모듈 경로 테스트

리팩토링 후 모든 모듈 경로 정상 확인:
- 파일 존재: 20/20 ✅
- Import 테스트: 7/10 (firebase_admin 미설치로 3개 실패, 경로 문제 아님)

---

## 내일 할 일

- [ ] scriptmate-be 서버 실행 테스트 (firebase 포함)
- [ ] partnersAI 개발 계속
- [ ] 필요시 scriptmate-be 프롬프트 작성

"""

[느낀 점]
1. 기획이 제일 어렵다. 끊임없는 가설과 검증의 연속.

---

출력 양식:

# 📅 날짜: (예: 25.11.11 (화))

## 🧩 주요 업무
- 오늘 수행한 핵심 업무를 구체적으로 요약  
- 기술적 결과, 진행 상황, 산출물 등을 명시  

## 🎯 목표 정리
### 장기 목표
- 프로젝트의 중장기적 방향 또는 최종 지향점  
### 단기 목표
- 오늘 혹은 이번 주 달성 목표  

## ⚙️ 진행 및 이슈
- 진행 단계별 구체적 내용  
- 발생한 문제와 해결 과정  
- 미해결 과제 및 후속 조치  

## 🧠 느낀 점 및 개선
- 사용자 입력 기반으로 정리된 통찰, 개선 아이디어, 학습 내용  

## 🤝 협업 및 커뮤니케이션
- 회의, 보고, 협업 이슈, 의사소통 내용 정리  
- 논의된 결정사항 및 향후 조율 방향  

## 📚 참고 및 학습 내용
- 새로 학습하거나 참고한 기술·논문·문서  
- 업무 개선에 도움이 된 개념 또는 자료  

## 📈 성과 및 지표
- 정량적 성과(예: 정확도, 속도, 효율 등)  
- 수치가 없을 경우 주요 진척도를 서술  

## 🗓️ 내일 계획
- 다음 업무 목표 및 우선순위  
- 예상 리스크 및 대비책  

---

지침:
1. 전체 분량은 500~650단어 이내로 유지한다.  
2. 문장은 명사형·서술형으로 끝내며, 감정적 표현은 제외한다.  
3. 입력이 비어 있으면 아래 기본 내용을 자동으로 채운다.
4. 날짜는 월화수목금의 요일만 사용한다.

---

[기본 디폴트 예시]
- **업무 내용**: LangChain 실습 복습, 문서 분석 코드 개선, 팀 회의 참석  
- **느낀 점**: 구조화된 학습이 업무 이해에 도움됨. 반복 작업 효율 개선 필요.
```

