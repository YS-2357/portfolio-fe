---
태그: []
날짜: "2026-01-05"
이름: "26.01.05 (월)"
---

# 26.01.05 (월)


# 📅 날짜: 26.01.05 (월)


## 🧩 주요 업무


- scriptmate-be 대규모 리팩토링 수행, 모놀리식 LLM 서비스 구조를 기능 단위(features)로 분리하고 공통 스키마·설정 구조를 표준화함.

- 프롬프트 버전관리 체계 도입, 프롬프트 파일 규격·로더 유틸·환경변수 기반 교체 흐름을 구축함.

- 전체 기능 검증 수행, 모듈 테스트 6/6 및 LLM 실제 호출 테스트 3/3 성공으로 리팩토링 안정성 확인함.

- 문서화 산출물 정리, 개발 규칙·에이전트 가이드·정적 자산/참조 문서 운영 기준을 명시함.

- insure-gpt / partnersAI / scriptmate-be 3개 프로젝트의 기술 스택·상태를 비교 정리하고 인수인계 요약을 작성함.

## 🎯 목표 정리


### 장기 목표


- scriptmate-be를 “대본 생성/검토 중심 MVP”로 안정화하여 기능 확장(실시간 STT/가이드) 이전에 구조·품질 기준을 고정하는 목표 설정함.

- 프롬프트 버전관리와 테스트 체계를 통해 LLM 기반 기능의 변경 비용을 낮추고 재현 가능한 개선 루프를 확립하는 목표 설정함.

- 프로젝트 인수인계 문서를 실행 가능한 수준으로 유지하여 담당자 변경 시 생산성 저하를 최소화하는 목표 설정함.

### 단기 목표


- scriptmate-be 전용 가상환경에서 UI 테스트를 완료하고 실행 환경 차이(의존성/환경변수/런타임)를 점검하는 목표 설정함.

- partnersAI 개발을 병행하며, 공통 패턴(폴더 구조·프롬프트 운영·문서 규칙)을 scriptmate-be에 계속 이식하는 목표 설정함.

- 필요 시 scriptmate-be 프롬프트를 0.2.0으로 개선하고, JSON 중괄호 이스케이프 등 템플릿 안전성을 유지하는 목표 설정함.

## ⚙️ 진행 및 이슈


- **리팩토링 진행**

- **프롬프트 버전관리 도입**

- **테스트 및 검증**

- **프로젝트 정리 및 인수인계**

## 🧠 느낀 점 및 개선


- 리팩토링 후 즉시 모듈/LLM 호출 테스트를 연결하여 구조 변경의 안정성을 확인하는 방식이 효과적임.

- 프롬프트 버전관리에서 “파일 규격 통일 + 환경변수 전환 + 템플릿 안전 규칙”이 핵심 운영 장치로 기능함.

- 기능 스코프를 `_deprecated/`로 분리하고 feature flag로 제어하는 방식이 MVP 집중도와 리스크 관리를 동시에 만족함.

- 인수인계 문서에서는 감상보다 실행 절차·담당 범위·중단 사유·재활용 포인트가 우선 기록 대상임.

## 🤝 협업 및 커뮤니케이션


- partnersAI 패턴을 scriptmate-be에 이식하여 팀 내 코드 구조·운영 규칙의 일관성을 확보하는 방향으로 조율함.

- 인수인계 요약을 3개 프로젝트 공통 포맷으로 작성하여 후속 담당자 커뮤니케이션 비용을 낮춤.

- 협업 이슈(외부 협업/조직 변화)는 문서상 “결정 사항/상태/다음 액션” 위주로만 기록하고 해석 요소는 배제하는 원칙을 유지함.

## 📚 참고 및 학습 내용


- LangChain 템플릿의 중괄호 해석 규칙과 프롬프트 내 JSON 예시 이스케이프 운영 방식 정리함.

- 기능 분리형 백엔드 구조(features + schemas + service + llm)와 설정 중앙집중(config) 패턴을 scriptmate-be에 적용함.

- 프롬프트 파일 규격(System/User 분리, 변수 표기)과 로더(parse_prompt) 사용 흐름을 문서로 고정함.

## 📈 성과 및 지표


- 리팩토링 커밋 기준 변경 규모 기록: 6 files(+487/-225), 39 files(+1742/-493) 반영함.

- 프롬프트 버전관리 구성 요소 5종(prompts 4종 + 로더) 생성 및 적용 완료함.

- 모듈 테스트 6/6 성공, LLM 실제 호출 테스트 3/3 성공으로 기능 회귀 위험을 낮춤.

- 3개 프로젝트의 기술 스택/상태/인수인계 요약을 완료하여 전달 가능 산출물 확보함.

## 🗓️ 내일 계획


- scriptmate-be 전용 가상환경에서 UI 테스트 수행 및 실행 절차 문서 보강함.

- partnersAI 개발 진행, 공통 규칙/문서/프롬프트 운영 체계를 유지하며 추가 기능을 정리함.

- scriptmate-be 프롬프트 최적화 필요 시 0.2.0 버전 작성 및 A/B 비교 기준(테스트 케이스/성공 조건) 설정함.

```markdown
당신은 ‘업무일지와 회고 정리 전문가’다.  
아래 사용자의 입력을 바탕으로 하루치 업무일지를 Markdown 형식으로 작성하라.  
입력이 비어 있으면 디폴트 예시 내용을 넣는다.  
결과는 실제 업무 문서에 기록 가능한 수준의 정확성·간결성을 유지하라.

---

입력 형식:
[업무 내용]
1. 코드 업무
"""
# 2026-01-05 작업 일지

## 개요

scriptmate-be 프로젝트의 대규모 리팩토링, 프롬프트 버전관리 도입, 문서화 작업 진행. 3개 프로젝트(insure-gpt, partnersAI, scriptmate-be)의 기술 스택 정리.

---

## 1. scriptmate-be 리팩토링

### 1.1 폴더 구조 변경

기존 모놀리식 구조를 partnersAI 패턴을 참고하여 기능별로 분리.

**변경 전**
```
app/
├── services/
│   ├── ai_service.py (413줄, 모든 LLM 로직)
│   ├── clova_speech/
│   ├── live_guide_service.py
│   └── live_sales_service.py
```

**변경 후**
```
app/
├── features/           # 기능별 분리
│   ├── script/         # 스크립트 생성
│   │   ├── schemas.py
│   │   └── service.py
│   ├── review/         # 스크립트 검토
│   │   ├── schemas.py
│   │   └── service.py
│   └── question/       # Q&A
│       ├── schemas.py
│       └── service.py
├── llm/                # LLM 모듈
│   ├── client.py       # LLM 클라이언트
│   └── graph.py        # LangGraph 워크플로우
├── schemas/            # 공통 스키마
│   ├── result.py       # Result 패턴
│   ├── errors.py       # 에러 코드
│   └── common.py       # UserInfo, ProductInfo 등
├── services/
│   ├── watcher_service.py
│   └── _deprecated/    # 보류 기능
│       ├── clova_speech/
│       ├── live_guide_service.py
│       └── live_sales_service.py
└── config.py           # 중앙집중 설정
```

### 1.2 커밋 내역

| 커밋 | 내용 | 변경 |
|------|------|------|
| `e1a20c4` | 화자 분리 기능 및 인식 개선 | 6 files, +487/-225 |
| `0776975` | app/ 폴더 구조 리팩토링 및 문서화 | 39 files, +1742/-493 |

---

## 2. 프롬프트 버전관리 도입

### 2.1 생성된 파일

| 파일 | 용도 |
|------|------|
| `prompts/script/generate_0.1.0.md` | 스크립트 생성 프롬프트 |
| `prompts/review/evaluate_0.1.0.md` | 스크립트 검토 프롬프트 |
| `prompts/question/answer_0.1.0.md` | 질문 응답 프롬프트 |
| `prompts/README.md` | 사용법 문서 |
| `app/utils/prompt_loader.py` | 프롬프트 로더 유틸리티 |

### 2.2 프롬프트 파일 형식

```markdown
# 프롬프트 제목 v버전

## System
시스템 프롬프트 내용

## User
유저 프롬프트 템플릿 (변수: {variable_name})
```

### 2.3 사용법

```python
from app.utils.prompt_loader import parse_prompt
from app.config import get_settings

settings = get_settings()
system, user = parse_prompt(settings.prompt_script)
```

### 2.4 버전 변경 방법

```env
# .env
PROMPT_SCRIPT=script/generate_0.2.0.md
```

### 2.5 주의사항

LangChain에서 `{}`는 변수로 해석되므로, JSON 예시는 `{{`/`}}`로 이스케이프 필요:

```markdown
# 잘못된 예
{"key": "value"}

# 올바른 예
{{"key": "value"}}
```

### 2.6 커밋 내역

| 커밋 | 내용 |
|------|------|
| `6c4e7b6` | feat: 프롬프트 버전 관리 시스템 도입 |
| `7b77d29` | fix: 프롬프트 JSON 예시 중괄호 이스케이프 |

---

## 3. 전체 기능 테스트

### 3.1 모듈 테스트 (6/6 성공)

| 테스트 | 결과 |
|--------|------|
| Config | ✅ OK |
| 프롬프트 로더 | ✅ OK |
| LangChain 템플릿 | ✅ OK |
| Feature 서비스 | ✅ OK |
| LangGraph | ✅ OK |
| 스키마 | ✅ OK |

### 3.2 LLM 실제 호출 테스트 (3/3 성공)

| 기능 | 결과 | 응답 |
|------|------|------|
| Q&A | ✅ OK | 367자 응답 |
| 스크립트 생성 | ✅ OK | 1시나리오 + 3상황 |
| 스크립트 검토 | ✅ OK | 132자 평가 + 3개 제안 |

---

## 4. 문서화

### 4.1 생성된 문서

| 파일 | 용도 |
|------|------|
| `AGENTS.md` | Claude Code 가이드, 파일 위치, 새 기능 추가 순서 |
| `SKILLS.md` | 개발 규칙, 네이밍 컨벤션, 실행 명령어 |
| `skills/README.md` | 스킬 스크립트 가이드 |
| `assets/README.md` | 정적 자산 가이드 |
| `references/README.md` | 참조 문서 가이드 |

---

## 5. 기술 스택 비교

3개 프로젝트의 기술 스택 정리 완료.

### 공통 기술
- FastAPI + Uvicorn (백엔드)
- Streamlit (프론트엔드)
- LangChain (LLM 오케스트레이션)
- Pydantic v2 (스키마 검증)

### 프로젝트별 특화

| 프로젝트 | DB | LLM | 특화 기술 |
|----------|-----|-----|----------|
| insure-gpt | CSV/JSON | OpenAI, DeepSeek | pdfplumber, LangGraph |
| partnersAI | SQLite (캐시) | OpenAI, Anthropic | 프롬프트 버전관리 |
| scriptmate-be | Firebase Firestore | OpenAI | gRPC, WebRTC, LangGraph |

### 프로젝트 상태

| 프로젝트 | 상태 | 비고 |
|----------|------|------|
| insure-gpt | 중단 | PDF 데이터 획득 어려움 |
| partnersAI | 개발중 | 4개 미션 구현 완료 |
| scriptmate-be | 개발중 | MVP (대본 생성/검토) |

---

## 6. 인수인계 문서 정리

3개 프로젝트 모두 인수인계 요약 작성:
- insure-gpt: 기획 의도, 중단 사유, 재활용 코드
- partnersAI: 4개 미션, 핵심 구현, 배포 준비 상태
- scriptmate-be: 3대 기능, 워크플로우, 보류 기능

---

## 내일 할 일

- [ ] scriptmate-be 전용 가상환경에서 UI 테스트
- [ ] partnersAI 개발 계속
- [ ] 필요시 scriptmate-be 프롬프트 최적화
"""
2. (회의, 개발, 보고 등)

[느낀 점]
1. 대표님이 나를 잡아주셨다. 이노부스트와의 협업도 마지막에 나타났다. 하지만 여기는 아니다. 내가 이룰 수 있는 것이 없다. 부디 모두 다 잘 되기를.

---

출력 양식:

# 📅 날짜: (예: 25.11.11 (화))

## 🧩 주요 업무
- 오늘 수행한 핵심 업무를 구체적으로 요약  
- 기술적 결과, 진행 상황, 산출물 등을 명시  

## 🎯 목표 정리
### 장기 목표
- 프로젝트의 중장기적 방향 또는 최종 지향점  
### 단기 목표
- 오늘 혹은 이번 주 달성 목표  

## ⚙️ 진행 및 이슈
- 진행 단계별 구체적 내용  
- 발생한 문제와 해결 과정  
- 미해결 과제 및 후속 조치  

## 🧠 느낀 점 및 개선
- 사용자 입력 기반으로 정리된 통찰, 개선 아이디어, 학습 내용  

## 🤝 협업 및 커뮤니케이션
- 회의, 보고, 협업 이슈, 의사소통 내용 정리  
- 논의된 결정사항 및 향후 조율 방향  

## 📚 참고 및 학습 내용
- 새로 학습하거나 참고한 기술·논문·문서  
- 업무 개선에 도움이 된 개념 또는 자료  

## 📈 성과 및 지표
- 정량적 성과(예: 정확도, 속도, 효율 등)  
- 수치가 없을 경우 주요 진척도를 서술  

## 🗓️ 내일 계획
- 다음 업무 목표 및 우선순위  
- 예상 리스크 및 대비책  

---

지침:
1. 전체 분량은 500~650단어 이내로 유지한다.  
2. 문장은 명사형·서술형으로 끝내며, 감정적 표현은 제외한다.  
3. 입력이 비어 있으면 아래 기본 내용을 자동으로 채운다.
4. 날짜는 월화수목금의 요일만 사용한다.

---

[기본 디폴트 예시]
- **업무 내용**: LangChain 실습 복습, 문서 분석 코드 개선, 팀 회의 참석  
- **느낀 점**: 구조화된 학습이 업무 이해에 도움됨. 반복 작업 효율 개선 필요.
```

